<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security6">
	
<th:block th:fragment="ajaxLoadedContent">
	
	<div class="container" 
		style="margin-top: 120px;margin-bottom: 100px;font-family: Oswald, sans-serif;color: #12044F;font-weight: 700;">
            <div class="text-center pt-3"> 
                <h3>REGISTRATION FORM</h3>
                <hr>
            </div>
            
        	<div class="row mt-2">
            	<div  class="col-md-6 offset-md-3 sigup_form">
            		<div class="sigup_form">
            			<form class="mt-3" id="registrationForm" th:object="${tempForm}" method="POST">
            			
            				<div class="mb-3 col-md-12">
                        		<label class="form-label" th:text="${'First Name'}"></label>
                          		<input 
                          			type="text" 
                          			class="form-control" 
                          			id="firstName"
                          			th:field="*{user.firstName}" 
                          			th:placeholder="${'Enter First Name'}"
                          		/> 
                          		<span
									class="text-danger" id="firstNameError"
									th:style="${'visibility: hidden;'}"
									th:text="${'Not Empty!Max 30 letters allowed!'}"> 
								</span>        
                    		</div>
                    		
                    		<div class="mb-3 col-md-12">
                        		<label class="form-label" th:text="${'Last Name'}"></label>
                          		<input 
                          			type="text" 
                          			class="form-control" 
                          			id="lastName"
                          			th:field="*{user.lastName}" 
                          			th:placeholder="${'Enter Last Name'}"
                          		/> 
                          		<span
									class="text-danger" id="lastNameError"
									th:style="${'visibility: hidden;'}"
									th:text="${'Not Empty!Max 30 letters allowed!'}"> 
								</span>        
                    		</div>
                    		              			  
                    		<div class="mb-3 col-md-12">
                        		<label class="form-label" th:text="${'Email'}"></label>
                          		<input 
                          			type="text" 
                          			class="form-control" 
                          			id="email"
                          			th:field="*{user.email}" 
                          			th:placeholder="${'Enter Email Address'}"
                          		/> 
                          		<span
									class="text-danger" id="emailError"
									th:style="${'visibility: hidden;'}"
									th:text="${'Please provide valid email!'}"> 
								</span>        
                    		</div>
                    		
                    		<div class="mb-3 col-md-12">
                        		<label class="form-label" th:text="${'Password'}"></label>
                          		<input 
                          			type="password" 
                          			class="form-control" 
                          			id="password"
                          			th:field="*{user.password}" 
                          			th:placeholder="${'Enter Password'}"
                          		/> 
                          		<span
									class="text-danger" id="passwordError"
									th:style="${'visibility: hidden;'}"
									th:text="${'Min 6 and Max 30 letters allowed!'}"> 
								</span>        
                    		</div>
                    		
                    		<div class="mb-5 col-md-12">
                        		<label class="form-label" th:text="${'Confirm Password'}"></label>
                          		<input 
                          			type="password" 
                          			class="form-control" 
                          			id="confirmpass"
                          			th:placeholder="${'Confirm Password'}"
                          		/>        
                    		</div>
                    
                     		<div class="text-center mb-3" style="text-transform: uppercase;">
                     			<h3 th:text="${'Address'}"></h3>
                     		</div>
                    
                    		<div class="mb-3 col-md-12">
                        		<label class="form-label" th:text="${'Address'}"></label>
                          		<input 
                          			type="text" 
                          			class="form-control" 
                          			id="address"
                          			th:field="*{address.address}" 
                          			th:placeholder="${'Enter Address'}"
                          		/> 
                          		<span
									class="text-danger" id="addressError"
									th:style="${'visibility: hidden;'}"
									th:text="${'Not Empty!Max 75 letters allowed!'}"> 
								</span>        
                    		</div>
                    		
                    		<div class="mb-3 col-md-12">
                        		<label class="form-label" th:text="${'City'}"></label>
                          		<input 
                          			type="text" 
                          			class="form-control" 
                          			id="city"
                          			th:field="*{address.city}" 
                          			th:placeholder="${'Enter City'}"
                          		/> 
                          		<span
									class="text-danger" id="cityError"
									th:style="${'visibility: hidden;'}"
									th:text="${'Not Empty!Max 40 letters allowed!'}"> 
								</span>        
                    		</div>
                    		
                    		<div class="mb-5 col-md-12">
                        		<label class="form-label" th:text="${'Post Code'}"></label>
                          		<input 
                          			type="text" 
                          			class="form-control" 
                          			id="postcode"
                          			th:field="*{address.postcode}" 
                          			th:placeholder="${'Enter Post Code'}"
                          		/> 
                          		<span
									class="text-danger" id="postcodeError"
									th:style="${'visibility: hidden;'}"
									th:text="${'Minimum 5 and Max 10 letters allowed!'}"> 
								</span>        
                    		</div>
                    		
                    		<div class="text-center mb-3" style="text-transform: uppercase;">
                     			<h3 th:text="${'phone number'}"></h3>
                     		</div>
                     		
                     		<div class="mb-5 col-md-12">
                        		<label class="form-label" th:text="${'Phone Number'}"></label>
                          		<input 
                          			type="text" 
                          			class="form-control" 
                          			id="customerPhone"
                          			th:field="*{customer.customerPhone}" 
                          			th:placeholder="${'Enter Phone Number'}"
                          			th:onkeypress="return validateNumber(event)"
                          		/> 
                          		<span
									class="text-danger" id="customerPhoneError"
									th:style="${'visibility: hidden;'}"
									th:text="${'Minimum 9 and Max 15 letters allowed!'}"> 
								</span>        
                    		</div>
                    		
                    		<div class="text-center">
                    			<button class="btn-creator-dark-blue"
                    				type="submit" 
                    				th:text="${'Register'}"
									th:onclick="return ValidatePassword()">
								</button>
                    		</div>
                    		
                		</form>
            		</div>
            	</div>
        	</div>
        </div>
	<script>
		var element = document.getElementById("registrationForm");
		element.addEventListener("submit", event => {
			event.preventDefault();
			var formData = $("#registrationForm");
			if(validateRegForm()){
				$.ajax({
					url : "http://localhost:8080/saveUser",
					type : "POST",
					data : formData.serialize()
				})
				.done(function(){
					$("#ajaxLoadedContent").load("/registerComplete");
				})
				.fail(function(){
					$("#ajaxLoadedContent").load("/registerFail");
				})
			}
		})
	</script>
</th:block>